@{
	ViewData["Title"] = "İstatistikler";
	Layout = "~/Views/Layout/Index.cshtml";
}

<div class="content">
	<div class="container-fluid">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<div>
				<h4 class="page-title">Genel Bakış & İstatistikler</h4>
			</div>
			<button class="btn btn-outline-primary btn-sm" onclick="window.location.reload();">
				<i class="la la-refresh"></i> Verileri Güncelle
			</button>
		</div>

		<div class="row">
			<div class="col-md-3">
				<div class="card card-stats card-warning shadow-sm border-0 transition-hover">
					<div class="card-body">
						<div class="row">
							<div class="col-4">
								<div class="icon-big text-center text-white">
									<i class="la la-star"></i>
								</div>
							</div>
							<div class="col-8 d-flex align-items-center">
								<div class="numbers text-white">
									<p class="card-category opacity-8 text-white">Toplam Yetenek</p>
									<h4 class="card-title font-weight-bold">@ViewBag.SkillCount</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-stats card-success shadow-sm border-0 transition-hover">
					<div class="card-body">
						<div class="row">
							<div class="col-4">
								<div class="icon-big text-center text-white">
									<i class="la la-envelope"></i>
								</div>
							</div>
							<div class="col-8 d-flex align-items-center">
								<div class="numbers text-white">
									<p class="card-category opacity-8 text-white">Toplam Mesaj</p>
									<h4 class="card-title font-weight-bold">@ViewBag.TotalMessages</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-stats card-danger shadow-sm border-0 transition-hover">
					<div class="card-body">
						<div class="row">
							<div class="col-4">
								<div class="icon-big text-center text-white">
									<i class="la la-inbox"></i>
								</div>
							</div>
							<div class="col-8 d-flex align-items-center">
								<div class="numbers text-white">
									<p class="card-category opacity-8 text-white">Bekleyen Mesaj</p>
									<h4 class="card-title font-weight-bold">@ViewBag.UnreadMessages</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-stats card-primary shadow-sm border-0 transition-hover">
					<div class="card-body">
						<div class="row">
							<div class="col-4">
								<div class="icon-big text-center text-white">
									<i class="la la-check-circle"></i>
								</div>
							</div>
							<div class="col-8 d-flex align-items-center">
								<div class="numbers text-white">
									<p class="card-category opacity-8 text-white">Okunan Mesaj</p>
									<h4 class="card-title font-weight-bold">@ViewBag.ReadMessages</h4>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<br />

		<div class="row">
			<div class="col-md-8">
				<div class="card shadow-sm border-0">
					<div class="card-header bg-white py-3">
						<h5 class="card-title mb-0">📩 Mesaj Analizi</h5>
					</div>
					<div class="card-body">
						<div class="mb-4">
							<div class="d-flex justify-content-between mb-1">
								<span class="font-weight-bold">Okunma Oranı</span>
								<span class="text-muted">@ViewBag.ReadMessages / @ViewBag.TotalMessages</span>
							</div>
							<div class="progress" style="height: 10px; border-radius: 5px;">
								@{
									var readPercent = ViewBag.TotalMessages > 0 ? (ViewBag.ReadMessages * 100 / ViewBag.TotalMessages) : 0;
								}
								<div class="progress-bar bg-primary" role="progressbar" style="width: @readPercent%"
									aria-valuenow="@readPercent" aria-valuemin="0" aria-valuemax="100"></div>
							</div>
						</div>

						<div class="row text-center mt-4">
							<div class="col-4 border-right">
								<h3 class="mb-0">@ViewBag.TotalMessages</h3>
								<small class="text-muted">Toplam</small>
							</div>
							<div class="col-4 border-right text-danger">
								<h3 class="mb-0 font-weight-bold">@ViewBag.UnreadMessages</h3>
								<small class="text-muted">Yanıt Bekliyor</small>
							</div>
							<div class="col-4 text-success">
								<h3 class="mb-0">%@(100 - ViewBag.UnreadPercentage)</h3>
								<small class="text-muted">Başarı Oranı</small>
							</div>
						</div>
					</div>
					<div class="card-footer bg-light text-center py-3">
						<a href="/Message/Inbox" class="btn btn-sm btn-link text-primary font-weight-bold">Tüm Mesajları Yönet <i
								class="la la-arrow-right"></i></a>
					</div>
				</div>
			</div>

			<div class="col-md-4">
				<div class="card shadow-sm border-0 bg-dark text-white">
					<div class="card-header bg-dark border-bottom border-secondary py-3">
						<h5 class="card-title mb-0 text-white">⭐ Yetenek Durumu</h5>
					</div>
					<div class="card-body">
						<div class="text-center py-3">
							<i class="la la-rocket text-warning" style="font-size: 60px;"></i>
							<h2 class="mt-3">@ViewBag.SkillCount</h2>
							<p class="text-muted small px-3">Şu an @ViewBag.SkillCount farklı alanda uzmanlığınızı sergiliyorsunuz.
								Portföyünüzü taze tutmak için yeni yetenekler eklemeyi unutmayın!</p>
						</div>
						<a href="/Skill/Create" class="btn btn-warning btn-block font-weight-bold mt-2 shadow">
							<i class="la la-plus"></i> Yeni Yetenek Ekle
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.transition-hover:hover {
		transform: translateY(-5px);
		transition: all 0.3s ease;
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
	}

	.opacity-8 {
		opacity: 0.8;
	}
</style>